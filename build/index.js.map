{"version":3,"sources":["../server/index.js"],"names":["aws_conf","bucket","credentials","secretAccessKey","accessKeyId","apiVersion","region","app","PORT","process","env","ENV","NODE_ENV","console","log","ENTRY","wpConfig","require","webpack","wpMiddle","wpHot","compiler","use","hot","express","static","path","join","__dirname","get","req","res","redirect","params","id","sendFile","server","listen"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;;;AACA;AACA,IAAMA,WAAW;AACfC,UAAQ,SADO;AAEfC,eAAa;AACXC,qBAAiB,EADN;AAEXC,iBAAa,EAFF;AAGXC,gBAAY,YAHD;AAIXC,YAAQ;AAJG;AAFE,CAAjB;AASA,IAAIC,MAAM,wBAAV;AACA;;AAEA,IAAMC,OAAOC,QAAQC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;AACA,IAAMG,MAAMF,QAAQC,GAAR,CAAYE,QAAZ,IAAwB,aAApC;AACAC,QAAQC,GAAR,CAAYH,GAAZ;AACA,IAAMI,QAAQJ,QAAQ,YAAR,GAAuB,oBAAvB,GAA8C,sBAA5D;;AAEA,IAAGA,QAAQ,aAAX,EAAyB;AACzB;AACE,MAAMK,WAAWC,QAAQ,oBAAR,CAAjB;AACA,MAAMC,UAAUD,QAAQ,SAAR,CAAhB;AACA,MAAME,WAAWF,QAAQ,wBAAR,CAAjB;AACA,MAAMG,QAAQH,QAAQ,wBAAR,CAAd;AACA,MAAMI,WAAWH,QAAQF,QAAR,CAAjB;AACAT,MAAIe,GAAJ,CAAQH,SAASE,QAAT,EAAmB;AACzBE,SAAK;AADoB,GAAnB,CAAR;AAGAhB,MAAIe,GAAJ,CAAQF,MAAMC,QAAN,CAAR;AACD,CAXD,MAWO;AACL;AACD;;AAEDd,IAAIe,GAAJ,CAAQ,SAAR,EAAmBE,kBAAQC,MAAR,CAAeC,eAAKC,IAAL,CAAUC,SAAV,EAAqB,WAArB,CAAf,CAAnB;AACArB,IAAIe,GAAJ,CAAQ,OAAR,EAAiBE,kBAAQC,MAAR,CAAeC,eAAKC,IAAL,CAAUC,SAAV,EAAqB,SAArB,CAAf,CAAjB;AACArB,IAAIsB,GAAJ,CAAQ,4BAAR,EAAsC,UAACC,GAAD,EAAKC,GAAL,EAAa;AACjDA,MAAIC,QAAJ,CAAa,GAAb,EAAkB,qCAAqChC,SAASC,MAA9C,GAAuD,GAAvD,GAA6D6B,IAAIG,MAAJ,CAAWC,EAA1F;AACD,CAFD;;AAIA3B,IAAIsB,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAKC,GAAL,EAAa;AACxBA,MAAII,QAAJ,CAAaT,eAAKC,IAAL,CAAUC,SAAV,EAAqBb,KAArB,CAAb;AACD,CAFD;;AAIA,IAAIqB,SAAS7B,IAAI8B,MAAJ,CAAW7B,IAAX,EAAiB,YAAM;AAClCK,UAAQC,GAAR,CAAY,qBAAZ,EAAmCN,IAAnC;AACD,CAFY,CAAb","file":"index.js","sourcesContent":["import express from 'express'\nimport path from 'path'\nimport S3 from 'aws-sdk/clients/s3'\n/* -------------------------------------------------------------- */\nconst aws_conf = {\n  bucket: 'adriapp',\n  credentials: {\n    secretAccessKey: '',\n    accessKeyId: '',\n    apiVersion: '2006-03-01',\n    region: 'eu-central-1'\n  }\n}\nlet app = express()\n//const s3 = new S3({})\n\nconst PORT = process.env.PORT || 8000\nconst ENV = process.env.NODE_ENV || 'development'\nconsole.log(ENV)\nconst ENTRY = ENV === 'production' ? '../dist/index.html' : '../client/index.html'\n\nif(ENV === 'development'){\n/* ------ for in memory bundle -------------------------------------- */\n  const wpConfig = require('../webpack.conf.js')\n  const webpack = require('webpack')\n  const wpMiddle = require('webpack-dev-middleware')\n  const wpHot = require('webpack-hot-middleware')\n  const compiler = webpack(wpConfig)\n  app.use(wpMiddle(compiler, {\n    hot: true\n  }))\n  app.use(wpHot(compiler))\n} else {\n  // PRODUCTION configuration\n}\n\napp.use('/client', express.static(path.join(__dirname, '../client')))\napp.use('/dist', express.static(path.join(__dirname, '../dist')))\napp.get('/client/public/css/img/:id', (req,res) => {\n  res.redirect(301, '//s3.eu-central-1.amazonaws.com/' + aws_conf.bucket + '/' + req.params.id)\n})\n\napp.get('/', (req,res) => {\n  res.sendFile(path.join(__dirname, ENTRY))\n})\n\nlet server = app.listen(PORT, () => {\n  console.log('Server running on: ', PORT)\n})\n"]}